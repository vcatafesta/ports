# Maintainer    : Vilmar Catafesta <vcatafesta@gmail.com>
# description   : DSSSL Stylesheets for DocBook
# depends   	:

name=docbook-dsssl
version=1.79
release=1
pkgname=docbook-dsssl
pkgver=1.79
pkgrel=9
pkgdesc="DSSSL Stylesheets for DocBook"
arch=('any')
url="http://docbook.sourceforge.net/"
license=('custom')
depends=('sgml-common' 'perl')
install=${pkgname}.install
source="https://sourceforge.net/projects/docbook/files/${pkgname}/${pkgver}/${pkgname}-${pkgver}.tar.bz2
	    https://gitlab.archlinux.org/archlinux/packaging/packages/docbook-dsssl/-/raw/main/docbook-dsssl.install
	    https://gitlab.archlinux.org/archlinux/packaging/packages/docbook-dsssl/-/raw/main/docbook-style-dsssl.Makefile"

prepare() {
	srcdir=$SRC
	pkgdir=$PKG
	cd "${pkgname}-${pkgver}"
	cp "${srcdir}"/docbook-style-dsssl.Makefile Makefile
}

build() {
	cd "${pkgname}-${pkgver}"
	# FS#67286 parallel installation might fail
	make -j1 install \
		BINDIR="${pkgdir}/usr/bin" \
		DESTDIR="${pkgdir}/usr/share/sgml/docbook/dsssl-stylesheets-${pkgver}" \
		MANDIR="${pkgdir}/usr/share/man"

	ln -s dsssl-stylesheets-${pkgver} ${pkgdir}/usr/share/sgml/docbook/dsssl-stylesheets
	# license
	install -Dm644 README "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}
